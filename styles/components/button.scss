@import "../tokens/color";
@import "../tokens/shadow";
@import "../tokens/typography";

// ------------------------------
// Base Tokens
// ------------------------------
$button-radius: 8px;
$button-gap: 4px;

// ------------------------------
// Mixins
// ------------------------------
@mixin icon-size($size) {
  width: $size;
  height: $size;
  display: inline-flex;
  align-items: center;
  justify-content: center;

  img, svg {
    width: 100%;
    height: 100%;
  }
}

// ------------------------------
// Base Button
// ------------------------------
.button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: $button-gap;
  padding: 4px 16px;
  border-radius: $button-radius;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease-in-out;
  font-weight: $font-bold;

  .icon {
    margin-right: $button-gap;
  }

  &.no-icon .icon {
    display: none;
  }

  &:hover:not(:disabled) {
    filter: brightness(0.95);
  }

  &:active:not(:disabled) {
    transform: scale(0.97);
  }

  // Disabled state (global)
  &:disabled,
  &.is-disabled {
    background: map-get($neutral-color, 30);
    color: map-get($neutral-color, 60);
    border: 1px solid map-get($neutral-color, 40);
    box-shadow: none;
    cursor: not-allowed;
    pointer-events: none;
    filter: none;
  }
}

// ------------------------------
// Ukuran & Icon
// ------------------------------
$button-sizes: (
  sm: (
    font-size: $text-s,
    line-height: $leading-s,
    height: 28px,
    icon-size: 12px
  ),
  md: (
    font-size: $text-m,
    line-height: $leading-m,
    height: 32px,
    icon-size: 16px
  ),
  lg: (
    font-size: $text-l,
    line-height: $leading-l,
    height: 40px,
    icon-size: 16px
  )
);

@each $size, $props in $button-sizes {
  .button--#{$size} {
    font-size: map-get($props, font-size);
    line-height: map-get($props, line-height);
    height: map-get($props, height);

    .icon {
      @include icon-size(map-get($props, icon-size));
    }
  }
}

// ------------------------------
// Warna Button
// ------------------------------
$button-colors: (
  primary: (
    bg: map-get($primary-color, main),
    color: #fff
  ),
  secondary: (
    bg: map-get($secondary-color, main),
    color: #333
  ),
  neutral: (
    bg: map-get($neutral-color, 10),
    color: #333
  )
);

@each $variant, $props in $button-colors {
  .button--#{$variant} {
    background: map-get($props, bg);
    color: map-get($props, color);
    box-shadow: $shadow-button;
    border: none;

    &:hover:not(:disabled) {
      background: darken(map-get($props, bg), 5%);
    }
  }
}

.button--neutral {
  border: 1px solid map-get($neutral-color, 40);
  color: map-get($neutral-color, 100);
}